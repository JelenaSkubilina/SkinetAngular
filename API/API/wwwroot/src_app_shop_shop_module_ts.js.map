{"version":3,"file":"src_app_shop_shop_module_ts.js","mappings":"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","sources":["./src/app/shared/models/pagination.ts","./src/app/shared/models/shopParams.ts","./src/app/shop/product-details/product-details.component.ts","./src/app/shop/product-item/product-item.component.ts","./src/app/shop/shop-routing.module.ts","./src/app/shop/shop.component.ts","./src/app/shop/shop.module.ts","./src/app/shop/shop.service.ts"],"sourcesContent":["import { IProduct } from \"./product\";\r\n\r\nexport interface IPagination {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  count: number;\r\n  data: IProduct[];\r\n}\r\n\r\nexport class Pagination implements IPagination {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  count: number;\r\n  data: IProduct[] = [];\r\n}\r\n","export class ShopParams {\r\n  brandId = 0;\r\n  typeId = 0;\r\n  sort = 'name';\r\n  pageNumber = 1;\r\n  pageSize = 6;\r\n  search: string;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BreadcrumbService } from 'xng-breadcrumb';\r\nimport { BasketService } from '../../basket/basket.service';\r\nimport { IProduct } from '../../shared/models/product';\r\nimport { ShopService } from '../shop.service';\r\n\r\n@Component({\r\n  selector: 'app-product-details',\r\n  templateUrl: './product-details.component.html',\r\n  styleUrls: ['./product-details.component.css']\r\n})\r\nexport class ProductDetailsComponent implements OnInit {\r\n  product: IProduct;\r\n  quantity = 1;\r\n\r\n  constructor(private shopService: ShopService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private basketService: BasketService,\r\n    private bcService: BreadcrumbService\r\n  ) {\r\n    this.bcService.set('@productDetails', '');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadProduct();\r\n  }\r\n\r\n  addItemToBasket() {\r\n    this.basketService.addItemToBasket(this.product, this.quantity);\r\n  }\r\n\r\n  incrementQuantity() {\r\n    this.quantity++;\r\n  }\r\n\r\n  decrementQuantity() {\r\n    if (this.quantity > 1)\r\n      this.quantity--;\r\n  }\r\n\r\n  loadProduct() {\r\n    this.shopService.getProduct(+this.activatedRoute.snapshot.paramMap.get('id')).subscribe(product => {\r\n      this.product = product;\r\n      this.bcService.set('@productDetails', product.name);\r\n    }, error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { BasketService } from '../../basket/basket.service';\r\nimport { IProduct } from '../../shared/models/product';\r\n\r\n@Component({\r\n  selector: 'app-product-item',\r\n  templateUrl: './product-item.component.html',\r\n  styleUrls: ['./product-item.component.css']\r\n})\r\nexport class ProductItemComponent implements OnInit {\r\n  @Input() product: IProduct;\r\n\r\n  constructor(private basketService: BasketService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  addItemToBasket() {\r\n    this.basketService.addItemToBasket(this.product);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ProductDetailsComponent } from './product-details/product-details.component';\r\nimport { ShopComponent } from './shop.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: ShopComponent },\r\n  { path: ':id', component: ProductDetailsComponent, data: { breadcrumb: {alias: 'productDetails'}}},\r\n];\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\nexport class ShopRoutingModule { }\r\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { IBrand } from '../shared/models/brand';\r\nimport { IProduct } from '../shared/models/product';\r\nimport { IType } from '../shared/models/productType';\r\nimport { ShopParams } from '../shared/models/shopParams';\r\nimport { ShopService } from './shop.service';\r\n\r\n@Component({\r\n  selector: 'app-shop',\r\n  templateUrl: './shop.component.html',\r\n  styleUrls: ['./shop.component.css']\r\n})\r\nexport class ShopComponent implements OnInit {\r\n  @ViewChild('search', { static: false }) searchTerm: ElementRef;\r\n\r\n  products: IProduct[];\r\n  types: IType[];\r\n  brands: IBrand[];\r\n  shopParams: ShopParams;\r\n  totalCount: number;\r\n\r\n  sortOptions = [\r\n    { name: 'Alphabetical', value: 'name' },\r\n    { name: 'Price: Low to High', value: 'priceAsc' },\r\n    { name: 'Price: High to Low', value: 'priceDesc' }\r\n  ];\r\n\r\n  constructor(private shopService: ShopService) {\r\n    this.shopParams = this.shopService.getShopParames();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getProducts(true);\r\n    this.getBrands();\r\n    this.getTypes();\r\n  }\r\n\r\n  getProducts(useCashe = false) {\r\n    this.shopService.getProducts(useCashe).subscribe(response => {\r\n      this.products = response.data;\r\n      this.totalCount = response.count;\r\n    }, error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  getBrands() {\r\n    this.shopService.getBrands().subscribe(response => {\r\n      this.brands = [{ id: 0, name: 'All' }, ...response];\r\n    }, error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  getTypes() {\r\n    this.shopService.getTypes().subscribe(response => {\r\n      this.types = [{ id: 0, name: 'All' }, ...response];\r\n    }, error => {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  onBrandSelected(brandId: number) {\r\n    const params = this.shopService.getShopParames();\r\n    params.brandId = brandId;\r\n    params.pageNumber = 1;\r\n    this.shopService.setShopParames(params);\r\n    this.getProducts();\r\n  }\r\n\r\n  onTypeSelected(typeId: number) {\r\n    const params = this.shopService.getShopParames();\r\n    params.typeId = typeId;\r\n    params.pageNumber = 1;\r\n    this.shopService.setShopParames(params);\r\n    this.getProducts();\r\n  }\r\n\r\n  onSortSelected(sort: string) {\r\n    const params = this.shopService.getShopParames();\r\n    params.sort = sort;\r\n    this.shopService.setShopParames(params);\r\n    this.getProducts();\r\n  }\r\n\r\n  onPageChanged(event: any) {\r\n    const params = this.shopService.getShopParames();\r\n\r\n    if (params.pageNumber !== event) {\r\n      params.pageNumber = event;\r\n      this.shopService.setShopParames(params);\r\n      this.getProducts(true);\r\n    }\r\n  }\r\n\r\n  onSearch() {\r\n    const params = this.shopService.getShopParames();\r\n    params.search = this.searchTerm.nativeElement.value;\r\n    params.pageNumber = 1;\r\n    this.shopService.setShopParames(params);\r\n    this.getProducts();\r\n  }\r\n\r\n  onReset() {\r\n    this.searchTerm.nativeElement.value = \"\";\r\n    this.shopParams = new ShopParams();\r\n    this.shopService.setShopParames(this.shopParams);\r\n    this.getProducts();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { ProductItemComponent } from './product-item/product-item.component';\r\nimport { ShopComponent } from './shop.component';\r\nimport { ProductDetailsComponent } from './product-details/product-details.component';\r\nimport { ShopRoutingModule } from './shop-routing.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProductItemComponent,\r\n    ShopComponent,\r\n    ProductDetailsComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    ShopRoutingModule\r\n  ],\r\n  exports: [ProductItemComponent]\r\n})\r\nexport class ShopModule { }\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { IBrand } from '../shared/models/brand';\r\nimport { IPagination, Pagination } from '../shared/models/pagination';\r\nimport { IType } from '../shared/models/productType';\r\nimport { map } from 'rxjs/operators';\r\nimport { ShopParams } from '../shared/models/shopParams';\r\nimport { IProduct } from '../shared/models/product';\r\nimport { environment } from '../../environments/environment';\r\nimport { of } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ShopService {\r\n  baseUrl = environment.apiUrl;\r\n  products: IProduct[] = [];\r\n  brands: IBrand[] = [];\r\n  types: IType[] = [];\r\n  pagination = new Pagination();\r\n  shopParams = new ShopParams();\r\n  productCache = new Map();\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  getProducts(useCache: boolean) {\r\n    if (useCache === false) {\r\n      this.productCache = new Map();\r\n    }\r\n\r\n    if (this.productCache.size > 0 && useCache === true) {\r\n      if (this.productCache.has(Object.values(this.shopParams).join('-'))) {\r\n        this.pagination.data = this.productCache.get(Object.values(this.shopParams).join('-'));\r\n        return of(this.pagination);\r\n      }\r\n    }\r\n\r\n    let params = new HttpParams();\r\n\r\n    if (this.shopParams.brandId !== 0) {\r\n      params = params.append('brandId', this.shopParams.brandId.toString());\r\n    }\r\n\r\n    if (this.shopParams.typeId !== 0) {\r\n      params = params.append('typeId', this.shopParams.typeId.toString());\r\n    }\r\n\r\n    if (this.shopParams.search) {\r\n      params = params.append('search', this.shopParams.search);\r\n    }\r\n\r\n    params = params.append('sort', this.shopParams.sort);\r\n    params = params.append('pageIndex', this.shopParams.pageNumber.toString());\r\n    params = params.append('pageSize', this.shopParams.pageSize.toString());\r\n\r\n    return this.http.get<IPagination>(this.baseUrl + 'products', { observe: 'response', params })\r\n      .pipe(\r\n        map(response => {\r\n          this.productCache.set(Object.values(this.shopParams).join('-'), response.body.data);\r\n          this.pagination = response.body;\r\n          return response.body;\r\n        })\r\n      );\r\n  }\r\n\r\n  setShopParames(params: ShopParams) {\r\n    this.shopParams = params;\r\n  }\r\n\r\n  getShopParames() {\r\n    return this.shopParams;\r\n  }\r\n\r\n  getTypes() {\r\n    if (this.types.length > 0) {\r\n      return of(this.types);\r\n    }\r\n\r\n    return this.http.get<IType[]>(this.baseUrl + 'products/types').pipe(\r\n      map(response => {\r\n        this.types = response;\r\n        return response;\r\n      }));\r\n  }\r\n\r\n  getBrands() {\r\n    if (this.brands.length > 0) {\r\n      return of(this.brands);\r\n    }\r\n\r\n    return this.http.get<IBrand[]>(this.baseUrl + 'products/brands').pipe(\r\n      map(response => {\r\n        this.brands = response;\r\n        return response;\r\n      }));;\r\n  }\r\n\r\n  getProduct(id: number) {\r\n    let product: IProduct;\r\n    this.productCache.forEach((products: IProduct[]) => {\r\n      product = products.find(p => p.id === id);\r\n    });\r\n\r\n    if (product) {\r\n      return of(product);\r\n    }\r\n\r\n    return this.http.get<IProduct>(this.baseUrl + 'products/' + id);\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}